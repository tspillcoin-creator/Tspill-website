<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>TSPILL Hub Test</title>
<style>
body{background:black;color:white;font-family:sans-serif}
#grid{margin:100px}
.intent{border:1px solid gold;padding:10px;margin-bottom:10px}
button{padding:10px}
</style>
</head>

<body>

<div id="top">Creator: <span id="cid"></span></div>

<div id="grid"></div>

<button onclick="openModal()">+</button>

<div id="modal" style="display:none">
  <p>MODAL OPENED</p>
  <button onclick="addIntent()">Add Intent</button>
</div>

<script>
document.addEventListener("DOMContentLoaded",()=>{
  console.log("JS RUNNING");

  const cid = localStorage.getItem("TSPILL_ID");
  if(!cid){
    alert("No ID, returning to gate");
    location.href="index.html";
  }

  document.getElementById("cid").textContent = cid;
  render();
});

let intents=[];

function render(){
  const g=document.getElementById("grid");
  g.innerHTML="";
  intents.forEach(i=>{
    const d=document.createElement("div");
    d.className="intent";
    d.textContent=i;
    g.appendChild(d);
  });
}

function openModal(){
  console.log("PLUS CLICKED");
  document.getElementById("modal").style.display="block";
}

function addIntent(){
  intents.push("Intent "+(intents.length+1));
  document.getElementById("modal").style.display="none";
  render();
}
</script>

</body>
</html>
