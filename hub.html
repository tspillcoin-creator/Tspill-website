<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>TSPILL — Public Ledger Hub</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">

<style>
:root{
  --gold:#d4af37;
  --bg:#000;
  --grid:#0f0f0f;
  --panel:#050505;
  --border:rgba(212,175,55,.25);
}

*{box-sizing:border-box;margin:0;padding:0}

body{
  background:var(--bg);
  color:#fff;
  font-family:Inter,system-ui;
  height:100vh;
  overflow:hidden;
}

/* BACKGROUND */
#bg-canvas{
  position:fixed;
  inset:0;
  z-index:0;
  pointer-events:none;
}

.watermark{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:10vw;
  font-family:Space Grotesk;
  font-weight:700;
  color:rgba(255,255,255,.02);
  letter-spacing:8px;
  z-index:1;
  pointer-events:none;
}

/* TOP META */
.top-meta{
  position:fixed;
  top:16px;
  right:40px;
  z-index:5;
  font-size:12px;
  letter-spacing:1px;
  color:var(--gold);
  white-space:nowrap;
}

/* LAYOUT */
.hub{
  position:relative;
  z-index:2;
  display:flex;
  height:100vh;
}

/* GRID */
.grid-wrap{
  flex:1;
  padding:100px 80px 80px;
  overflow-y:auto;
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
  gap:28px;
}

.intent-card{
  background:var(--grid);
  border:1px solid rgba(255,255,255,.06);
  padding:16px;
  height:120px;
  cursor:pointer;
  transition:.2s ease;
  position:relative;
}

.intent-card:hover{
  border-color:var(--gold);
}

.intent-id{
  font-size:11px;
  letter-spacing:1px;
  color:#aaa;
}

.intent-stage{
  position:absolute;
  bottom:14px;
  right:14px;
  font-size:10px;
  color:var(--gold);
}

.intent-thumb{
  margin-top:12px;
  width:100%;
  height:48px;
  background:#111;
  opacity:.35;
}

/* SIDE PANEL */
.side-panel{
  width:0;
  background:var(--panel);
  border-left:1px solid var(--border);
  overflow:hidden;
  transition:.25s ease;
}

.side-panel.open{
  width:380px;
}

.panel-inner{
  height:100%;
  overflow-y:auto;
  padding:30px;
}

.panel-inner h2{
  font-family:Space Grotesk;
  font-size:1.1rem;
  margin-bottom:12px;
}

.panel-section{
  margin-bottom:28px;
  font-size:13px;
  color:#ccc;
}

.panel-section span{
  color:var(--gold);
}

/* PLUS BUTTON */
.plus-wrap{
  position:fixed;
  bottom:40px;
  left:50%;
  transform:translateX(-50%);
  z-index:6;
}

.plus-btn{
  width:60px;
  height:60px;
  border-radius:50%;
  border:1px solid var(--gold);
  background:transparent;
  color:var(--gold);
  font-size:28px;
  cursor:pointer;
}

.rotate-text{
  position:absolute;
  inset:-22px;
  border-radius:50%;
  border:1px dashed rgba(212,175,55,.35);
  animation:spin 12s linear infinite;
}

@keyframes spin{
  from{transform:rotate(0deg)}
  to{transform:rotate(360deg)}
}
</style>
</head>

<body>

<canvas id="bg-canvas"></canvas>
<div class="watermark">PUBLIC&nbsp;LEDGER</div>

<div class="top-meta" id="metaLine">
  Creator: — | State: Active | Signals: 0
</div>

<div class="hub">

  <!-- GRID -->
  <div class="grid-wrap" id="grid"></div>

  <!-- SIDE PANEL -->
  <div class="side-panel" id="panel">
    <div class="panel-inner" id="panelContent">
      <!-- injected -->
    </div>
  </div>

</div>

<!-- PLUS -->
<div class="plus-wrap">
  <div class="rotate-text"></div>
  <button class="plus-btn">+</button>
</div>

<script>
/* ID CHECK */
const creatorId = localStorage.getItem("TSPILL_ID");
if(!creatorId) location.href="index.html";
document.getElementById("metaLine").textContent =
`Creator: ${creatorId} | State: Active | Signals: 0`;

/* MOCK INTENTS */
const intents=[
 {id:"INT-001",stage:2,image:true,desc:"Material-driven footwear concept."},
 {id:"INT-002",stage:1,image:false,desc:"Speculative object design."},
 {id:"INT-003",stage:3,image:true,desc:"Production-linked artifact."}
];

const grid=document.getElementById("grid");
const panel=document.getElementById("panel");
const panelContent=document.getElementById("panelContent");
let openId=null;

/* RENDER GRID */
intents.forEach(i=>{
 const card=document.createElement("div");
 card.className="intent-card";
 card.innerHTML=`
  <div class="intent-id">${i.id}</div>
  ${i.image?'<div class="intent-thumb"></div>':''}
  <div class="intent-stage">Stage ${i.stage}</div>
 `;
 card.onclick=()=>togglePanel(i);
 grid.appendChild(card);
});

/* PANEL TOGGLE */
function togglePanel(intent){
 if(openId===intent.id){
   panel.classList.remove("open");
   openId=null;
   return;
 }
 openId=intent.id;
 panel.classList.add("open");
 panelContent.innerHTML=`
   <h2>${intent.id}</h2>

   <div class="panel-section">
     <span>Stage:</span> ${intent.stage}
   </div>

   <div class="panel-section">
     <span>Description:</span><br>${intent.desc}
   </div>

   ${intent.stage===2 && intent.image ? `
   <div class="panel-section">
     <span>Reference Image</span>
     <div style="height:140px;background:#111;margin-top:10px;"></div>
   </div>` : ``}

   <div class="panel-section">
     <span>Status:</span> ${stageLabel(intent.stage)}
   </div>
 `;
}

/* STAGE LABEL */
function stageLabel(s){
 return {
 0:"Declared",
 1:"Logged",
 2:"Under Observation",
 3:"External Interest Detected",
 4:"Execution Path Open",
 5:"Archived"
 }[s];
}

/* BACKGROUND ANIMATION */
const c=document.getElementById("bg-canvas"),x=c.getContext("2d");
let pts=[];
function init(){
 c.width=innerWidth;c.height=innerHeight;
 pts=[...Array(50)].map(()=>({
  x:Math.random()*c.width,
  y:Math.random()*c.height,
  vx:(Math.random()-.5)*.3,
  vy:(Math.random()-.5)*.3
 }));
}
function draw(){
 x.clearRect(0,0,c.width,c.height);
 pts.forEach((p,i)=>{
  p.x+=p.vx;p.y+=p.vy;
  if(p.x<0||p.x>c.width)p.vx*=-1;
  if(p.y<0||p.y>c.height)p.vy*=-1;
  for(let j=i+1;j<pts.length;j++){
   const q=pts[j],d=Math.hypot(p.x-q.x,p.y-q.y);
   if(d<160){
    x.strokeStyle=`rgba(212,175,55,${.25*(1-d/160)})`;
    x.beginPath();x.moveTo(p.x,p.y);x.lineTo(q.x,q.y);x.stroke();
   }
  }
 });
 requestAnimationFrame(draw);
}
addEventListener("resize",init);
init();draw();
</script>

</body>
</html>
