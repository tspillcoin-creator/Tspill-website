<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>TSPILL</title>
    <meta name="description" content="TSPILL — The currency for creators, innovators, and designers." />
    <style>
      html{scroll-behavior:smooth}
      body{margin:0;font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;background:#0b0f14;color:#e8f0ff}

      :root{
        --brand-btn:#8c5a24;
        --brand-btn-hover:#a46829;
        --btn-text:#ffffff;
        --field-bg:#0b1220;
        --field-border:#1c2538;
        --field-text:#e8f0ff;
        --field-placeholder:#b8c6e0;
      }

      .skip{position:absolute;left:-9999px;top:auto}
      .skip:focus{left:10px;top:10px;background:#fff;color:#000;padding:8px 10px;border-radius:6px}

      header{position:sticky;top:0;background:#0b0f14;padding:20px 20px 10px;text-align:center;z-index:10;border-bottom:1px solid #121a2a}
      .nav{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin:8px 0}
      .btn{padding:8px 12px;border:1px solid #2a3550;border-radius:10px;color:#cfe3ff;text-decoration:none}

      .connect-fixed{position:fixed;top:10px;right:10px;z-index:20;background:var(--brand-btn);color:var(--btn-text);border:0;border-radius:10px;padding:8px 12px;cursor:pointer;box-shadow:0 0 0 1px #2a3550 inset}
      .connect-fixed:hover{background:var(--brand-btn-hover)}

      .hero{max-width:900px;margin:24px auto;padding:0 20px;text-align:center}
      main section{max-width:1000px;margin:40px auto;padding:0 20px}
      h2{margin:8px 0 6px}
      h3{margin:0 0 12px}
      .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px;margin:20px 0}
      .card{padding:16px;border:1px solid #1c2538;border-radius:14px;background:#0e1420}
      footer{padding:24px;text-align:center;color:#9fb3d1}

      .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
      .muted{color:#9fb3d1;font-size:.95rem}
      .mono{font-family:ui-monospace,Menlo,Consolas,monospace}
      .ok{color:#8ee5a1}.warn{color:#ffd57a}.err{color:#ffa7a7}

      input[type="number"],input[type="text"]{
        width:100%;padding:10px;border-radius:10px;border:1px solid var(--field-border);
        background:var(--field-bg);color:var(--field-text);
        -webkit-text-fill-color:var(--field-text);caret-color:var(--field-text);
      }
      ::placeholder{color:var(--field-placeholder);opacity:1}
      :-ms-input-placeholder{color:var(--field-placeholder)}
      ::-ms-input-placeholder{color:var(--field-placeholder)}
      input:-webkit-autofill,
      input:-webkit-autofill:hover,
      input:-webkit-autofill:focus,
      input:-webkit-autofill:active{
        -webkit-box-shadow:0 0 0 1000px var(--field-bg) inset !important;
        box-shadow:0 0 0 1000px var(--field-bg) inset !important;
        -webkit-text-fill-color:var(--field-text) !important;
        caret-color:var(--field-text) !important;
      }
      input:-internal-autofill-selected{background-color:var(--field-bg) !important;color:var(--field-text) !important}

      .chip{background:var(--brand-btn);color:#fff;border:0;border-radius:10px;padding:8px 10px;cursor:pointer;min-width:56px;text-align:center}
      .chip:hover{background:var(--brand-btn-hover)}

      main section{display:none}
      main[data-active="overview"]   #overview{display:block}
      main[data-active="tokenomics"] #tokenomics{display:block}
      main[data-active="whitepaper"] #whitepaper{display:block}
      main[data-active="roadmap"]    #roadmap{display:block}
      main[data-active="presale"]    #presale{display:block}
      main[data-active="staking"]    #staking{display:block}
      main[data-active="sponsors"]   #sponsors{display:block}
      main[data-active="community"]  #community{display:block}
      main[data-active="trust"]      #trust{display:block}

      .icon-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}
      .icon-link{display:flex;align-items:center;gap:10px;padding:10px;border:1px solid #1c2538;border-radius:12px;background:#0b1220;text-decoration:none;color:#e8f0ff}
      .icon-link:hover{border-color:#2a3550;background:#0f1626}
      .icon-link img{width:24px;height:24px}
      .handle{opacity:.9;word-break:break-word;overflow-wrap:break-word}
    </style>
  </head>
  <body>
    <a href="#main" class="skip">Skip to content</a>
    <button id="connectBtnFixed" class="connect-fixed">Connect Phantom</button>

    <header id="top">
      <img src="./Tea_spill_logo.png" alt="TSPILL logo" width="88" height="88" style="display:block;margin:8px auto 6px" />
      <h1 style="margin:6px 0 6px;text-align:center">TSPILL</h1>
      <p style="margin:0 0 14px;text-align:center;color:#cfe3ff;opacity:0.95;font-size:1.05rem;">The currency for creators, innovators, and designers.</p>
      <nav class="nav" aria-label="Primary">
        <a class="btn" href="#overview">Home</a>
        <a class="btn" href="#tokenomics">Tokenomics</a>
        <a class="btn" href="#whitepaper">Whitepaper</a>
        <a class="btn" href="#roadmap">Roadmap</a>
        <a class="btn" href="#presale">Presale</a>
        <a class="btn" href="#staking">Staking</a>
        <a class="btn" href="#sponsors">Sponsors</a>
        <a class="btn" href="#community">Community</a>
        <a class="btn" href="#trust">Trust</a>
      </nav>
      <div class="row" style="justify-content:center;margin-top:6px">
        <span id="walletBadge" class="muted"></span>
      </div>
    </header>

    <main id="main" data-active="overview">
      <!-- HOME -->
      <section class="hero" id="overview">
        <h2>Build with creators. Ship with manufacturers.</h2>
        <p style="margin:0 0 6px;opacity:.92">From concept to shelf—with credit and rewards intact.</p>
        <p style="margin:10px 0 0">Mint address: <strong>2whGdeMMm1E8JJ6cANoNARLNFbayfV2Mixh3WSQUUSbK</strong></p>
        <div class="grid" style="margin-top:16px">
          <div class="card"><strong>About</strong><p style="margin:8px 0 0">TSPILL connects creators and vetted manufacturers to turn concepts into real products with attribution, straightforward rewards, and transparent economics.</p></div>
          <div class="card"><strong>Token function</strong><ul style="margin:8px 0 0 18px"><li>Access: open calls, submissions</li><li>Incentives: useful participation</li><li>Program rails: fees/discounts</li><li>Signals: what to launch next</li></ul></div>
          <div class="card"><strong>Ecosystem benefits</strong><ul style="margin:8px 0 0 18px"><li>Creators: recognition and rewards</li><li>Manufacturers: qualified briefs</li><li>Sponsors: measurable outcomes</li></ul></div>
        </div>
      </section>

      <!-- TOKENOMICS -->
      <section id="tokenomics">
        <h3>Tokenomics</h3>
        <div class="card" style="margin:14px 0"><strong>Mint</strong><p style="margin:8px 0 0;word-break:break-all">2whGdeMMm1E8JJ6cANoNARLNFbayfV2Mixh3WSQUUSbK</p></div>
        <div class="card" style="margin:14px 0"><strong>Supply</strong><p style="margin:8px 0 0">Total supply: 1,000,000,000 TSPILL (9 decimals). Initial circulating at TGE: 35,000,000 (3.5%).</p></div>
        <div class="grid">
          <div class="card"><strong>Allocation</strong><ul style="margin:8px 0 0 18px"><li>Presale: 30% (300,000,000)</li><li>Ecosystem & Community: 35%</li><li>Team/Dev: 12.5%</li><li>Treasury & Partnerships: 12.5%</li><li>Liquidity: 5%</li><li>Staking/Rewards: 5%</li></ul></div>
          <div class="card"><strong>Vesting & locks</strong><ul style="margin:8px 0 0 18px"><li>Presale: 10% TGE, 90% linear 9 months</li><li>Team/Dev: 12‑month cliff, then 36‑month linear</li><li>Ecosystem: tiny TGE; 36‑month linear</li><li>Treasury: 6‑month cliff; 24‑month linear</li><li>Liquidity: LP lock 12 months</li></ul></div>
          <div class="card"><strong>Utility & transparency</strong><ul style="margin:8px 0 0 18px"><li>Access, incentives, program rails, signals</li><li>Mint revoked; update secured</li><li>Unlock calendar and proofs published</li></ul></div>
        </div>
      </section>

      <!-- WHITEPAPER -->
      <section id="whitepaper">
        <h3>Whitepaper</h3>
        <p style="margin:0 0 12px"><a href="./TSPILL_Whitepaper.pdf" target="_blank" rel="noopener">View PDF</a> &nbsp;•&nbsp; <a href="./TSPILL_Whitepaper.pdf" download="TSPILL_Whitepaper.pdf" target="_blank" rel="noopener">Download</a></p>
        <div class="grid">
          <div class="card"><strong>Executive summary</strong><p style="margin:8px 0 0">Open challenges → prototypes → vetted production, with attribution and simple rewards defined upfront.</p></div>
          <div class="card"><strong>Problem</strong><p style="margin:8px 0 0">Creators need factory access and ongoing rewards; manufacturers need qualified briefs and predictable runs.</p></div>
          <div class="card"><strong>Solution</strong><p style="margin:8px 0 0">Transparent briefs, timelines, and costs, with receipts for distributions.</p></div>
        </div>
      </section>

      <!-- ROADMAP -->
      <section id="roadmap">
        <h3>Roadmap</h3>
        <div class="grid">
          <div class="card"><strong>Phase 1: Presale setup</strong><ul style="margin:8px 0 0 18px"><li>Site live; authorities published</li><li>Manufacturer shortlist</li><li>Presale execution; unlock calendar</li></ul></div>
          <div class="card"><strong>Phase 2: First programs</strong><ul style="margin:8px 0 0 18px"><li>Open calls; prototype finalists</li><li>Vetted production timelines</li><li>Program support</li></ul></div>
          <div class="card"><strong>Phase 3: Production link</strong><ul style="margin:8px 0 0 18px"><li>Pilot runs with clear MOQs and costs</li><li>Reward receipts</li><li>Sponsor programs</li></ul></div>
          <div class="card"><strong>Phase 4: Scale and data</strong><ul style="margin:8px 0 0 18px"><li>Recurring challenges and metrics</li><li>Dashboards and emissions reviews</li><li>Integrations and tooling</li></ul></div>
        </div>
      </section>

      <!-- PRESALE -->
      <section id="presale">
        <h3>Presale</h3>
        <p class="muted">Buy TSPILL on Solana — USDT value paid in SOL. 10% at TGE, then monthly over 9 months.</p>

        <div class="grid">
          <div class="card">
            <strong>Checkout</strong>
            <div class="row" style="margin-top:8px">
              <input id="usdtInput" type="number" step="0.01" min="5" placeholder="USDT value (e.g., 50)" />
              <button class="chip" data-q="50">50</button>
              <button class="chip" data-q="100">100</button>
              <button class="chip" data-q="250">250</button>
              <button class="chip" data-q="1000">1000</button>
            </div>
            <p class="muted" style="margin:8px 0 0">Min 5 • Max 1000 (USDT value)</p>

            <div id="estimateBlock" style="margin-top:12px">
              <label for="solOut">Estimated SOL to send</label>
              <input id="solOut" type="text" readonly />
              <p class="muted" id="quoteNote">Fetching quote…</p>
            </div>

            <div style="margin-top:12px">
              <label for="tspillOut">You receive (TSPILL)</label>
              <input id="tspillOut" type="text" readonly />
              <p class="muted">Price: 0.001 USDT per TSPILL</p>
            </div>

            <div style="margin-top:12px">
              <button id="sendBtn" class="connect-fixed" style="position:static">Send SOL to Presale</button>
              <p id="sendHint" class="muted">Phantom opens to review and sign a SOL transfer to the treasury.</p>
              <p id="txStatus" class="muted"></p>
            </div>
          </div>

          <div class="card">
            <strong>Key parameters</strong>
            <ul style="margin:8px 0 0 18px">
              <li>Presale allocation: 30% (300,000,000 TSPILL)</li>
              <li>Token price: 0.001 USDT per TSPILL</li>
              <li>Accepted currency: SOL (quoted at settlement)</li>
              <li>Per‑wallet cap: up to 1,000 USDT equivalent</li>
              <li>Soft/Hard caps: 50,000 / 300,000 USDT</li>
              <li>Window: 21 days (optional 7‑day extension)</li>
            </ul>
            <div style="margin-top:12px">
              <strong>Addresses & mint</strong>
              <p class="mono" style="margin:8px 0 0">Deposit address (Presale treasury): DgNqpvhNEhEKrc3wUKRccP1S2iUPFgaKbVqik7QmmYTK</p>
              <p class="mono" style="margin:6px 0 0">TSPILL mint: 2whGdeMMm1E8JJ6cANoNARLNFbayfV2Mixh3WSQUUSbK</p>
            </div>
            <p class="muted" style="margin-top:10px">Use Phantom; do not send from exchange addresses. Quotes are live and valid briefly.</p>
          </div>
        </div>

        <div class="card"><strong>Positive roll‑forward</strong><p style="margin:8px 0 0">If the soft cap is not reached by the end date, all confirmed allocations automatically roll into Presale‑02 at the same price and vesting terms.</p></div>
        <div class="card"><strong>Transparency</strong><ul style="margin:8px 0 0 18px"><li>Public read‑only ledger shows total raised (USDT value), allocations, and remaining capacity.</li><li>Before TGE, claim parameters will be published for deterministic claims.</li><li>No third‑party custody; funds remain in the presale treasury wallet.</li></ul></div>
      </section>

      <!-- STAKING -->
      <section id="staking">
        <h3>Staking</h3>
        <div class="grid">
          <div class="card"><strong>Pools & APR</strong><ul style="margin:8px 0 0 18px"><li>Core pool (flexible): APR floats 8%–12% by utilization; rewards accrue continuously; claim or compound any time.</li><li>Booster pools (coming): 30/60/90 day locks with +2%/+4%/+6% boosts; early exit forfeits current booster only.</li></ul></div>
          <div class="card"><strong>Emissions schedule</strong><ul style="margin:8px 0 0 18px"><li>Budget: 50,000,000 TSPILL over 24 months with quarterly step‑downs.</li><li>Epoch cadence: 7‑day checkpoints; APR scales with total staked.</li></ul></div>
          <div class="card"><strong>Compounding & exits</strong><ul style="margin:8px 0 0 18px"><li>Claim to wallet any time; one‑click compound to increase effective APY.</li><li>Flexible pool unbonding up to 72 hours; booster early exit keeps principal and realized rewards.</li></ul></div>
        </div>
      </section>

      <!-- SPONSORS -->
      <section id="sponsors">
        <h3>Sponsors & partners</h3>
        <p class="muted">Building the right partnerships for real products, measurable outcomes, and shared rewards.</p>
        <div class="grid">
          <div class="card"><strong>In discussion</strong><p style="margin:8px 0 0">Exploring category partners who value transparent budgets, fair attribution, and visible impact.</p></div>
          <div class="card"><strong>Open brief</strong><p style="margin:8px 0 0">Seeking sponsors for pilot runs and creator challenges across 2–3 launch categories.</p></div>
          <div class="card"><strong>Coming soon</strong><p style="margin:8px 0 0">Sponsor playbook with examples, deliverables, and reporting templates.</p></div>
        </div>
        <div class="grid">
          <div class="card"><p style="margin:0">“Real products. Clear attribution. Shared rewards.”</p></div>
          <div class="card"><p style="margin:0">“From open brief to shipped run—measurable at every step.”</p></div>
          <div class="card"><p style="margin:0">“Not a funding platform—a production link.”</p></div>
          <div class="card"><p style="margin:0">“If it ships, it counts.”</p></div>
          <div class="card"><p style="margin:0">“Sponsors who back builders.”</p></div>
        </div>
      </section>

      <!-- COMMUNITY -->
      <section id="community">
        <h3>Community</h3>
        <p class="muted">Connect with TSPILL across platforms. Only links on this page are official.</p>
        <div class="card">
          <strong>Official links</strong>
          <div class="icon-grid" style="margin-top:10px">
            <a class="icon-link" href="https://x.com/tspillofficial" target="_blank" rel="noopener">
              <img src="./48x48_Twitter_Logo.png" alt="X logo" /><span>X — <span class="handle">@tspillofficial</span></span>
            </a>
            <a class="icon-link" href="https://t.me/tspillofficial" target="_blank" rel="noopener">
              <img src="./48x48_Telegram_Logo.png" alt="Telegram logo" /><span>Telegram — <span class="handle">@tspillofficial</span></span>
            </a>
            <a class="icon-link" href="https://discord.gg/tspillofficial" target="_blank" rel="noopener">
              <img src="./48x48_Discord_Logo.png" alt="Discord logo" /><span>Discord — <span class="handle">@tspillofficial</span></span>
            </a>
            <a class="icon-link" href="https://www.notion.so/tspillofficial" target="_blank" rel="noopener">
              <img src="./48x48_Notion_Logo.png" alt="Notion logo" /><span>Notion — <span class="handle">@tspillofficial</span></span>
            </a>
            <a class="icon-link" href="https://www.pinterest.com/tspillofficial" target="_blank" rel="noopener">
              <img src="./48x48_Pinterest_Logo.png" alt="Pinterest logo" /><span>Pinterest — <span class="handle">@tspillofficial</span></span>
            </a>
            <a class="icon-link" href="https://tspillofficial.gumroad.com" target="_blank" rel="noopener">
              <img src="./48x48_Gumroad_Logo.png" alt="Gumroad logo" /><span class="handle">Gumroad — tspillofficial.gumroad.com</span>
            </a>
          </div>
          <p class="muted" style="margin-top:10px">Admins never DM for keys or seed phrases. Bookmark this page for verified links.</p>
        </div>
      </section>

      <!-- TRUST -->
      <section id="trust">
        <h3>Trust</h3>
        <div class="grid">
          <div class="card">
            <strong>Authorities</strong>
            <ul style="margin:8px 0 0 18px">
              <li>Mint authority: revoked</li>
              <li>Update authority: secured</li>
              <li>TSPILL mint: 2whGdeMMm1E8JJ6cANoNARLNFbayfV2Mixh3WSQUUSbK</li>
            </ul>
          </div>
          <div class="card">
            <strong>Addresses & custody</strong>
            <ul style="margin:8px 0 0 18px">
              <li>Deposit address (Presale treasury): DgNqpvhNEhEKrc3wUKRccP1S2iUPFgaKbVqik7QmmYTK</li>
              <li>No third‑party custody; receipts published</li>
            </ul>
          </div>
          <div class="card">
            <strong>Vesting & proofs</strong>
            <ul style="margin:8px 0 0 18px">
              <li>Presale: 10% TGE, 90% linear 9 months</li>
              <li>Claim parameters published before TGE</li>
              <li>Public ledger for allocations and tx hashes</li>
            </ul>
          </div>
        </div>
      </section>
    </main>

    <footer>© TSPILL</footer>

    <script>
      (function(){
        const main=document.getElementById('main');
        const ids=new Set(['overview','tokenomics','whitepaper','roadmap','presale','staking','sponsors','community','trust']);
        function setActive(){let h=(location.hash||'#overview').slice(1); if(!ids.has(h)) h='overview'; main.setAttribute('data-active',h); const el=document.getElementById(h); if(el) el.scrollIntoView({behavior:'smooth',block:'start'});}
        if(location.hash && !document.querySelector(location.hash)){ history.replaceState(null,"",location.pathname+location.search+'#overview'); }
        window.addEventListener('hashchange',setActive);
        window.addEventListener('DOMContentLoaded',setActive);
        document.addEventListener('click',e=>{ const a=e.target.closest('a[href^="#"]'); if(!a) return; const id=a.getAttribute('href').slice(1); if(ids.has(id)){ if(location.hash.slice(1)===id){ setActive(); } }});
      })();
    </script>

    <script src="https://unpkg.com/@solana/web3.js@1.95.3/lib/index.iife.min.js" crossorigin="anonymous"></script>
    <script>
      (function(){
        const RPC="https://api.mainnet-beta.solana.com";
        const connection=new solanaWeb3.Connection(RPC,'confirmed');

        const treasury=new solanaWeb3.PublicKey("DgNqpvhNEhEKrc3wUKRccP1S2iUPFgaKbVqik7QmmYTK");
        const PRICE_USDT_PER_TSPILL=0.001;
        const MIN_USDT=5, MAX_USDT=1000;

        const connectBtnFixed=document.getElementById('connectBtnFixed');
        const walletBadge=document.getElementById('walletBadge');
        const usdtInput=document.getElementById('usdtInput');
        const solOut=document.getElementById('solOut');
        const tspillOut=document.getElementById('tspillOut');
        const quoteNote=document.getElementById('quoteNote');
        const estimateBlock=document.getElementById('estimateBlock');
        const sendBtn=document.getElementById('sendBtn');
        const chips=document.querySelectorAll('.chip');
        const txStatus=document.getElementById('txStatus');

        let provider=null;
        let quote={solPerUsdt:0, ts:0};

        function getProvider(){ if('solana' in window){ const p=window.solana; if(p && p.isPhantom) return p; } return null; }
        async function doConnect(){ provider=getProvider(); if(!provider){ if(walletBadge) walletBadge.textContent="Phantom not found — install the wallet."; return; } try{ const r=await provider.connect(); if(walletBadge) walletBadge.textContent="Connected: "+r.publicKey.toBase58().slice(0,4)+"…"+r.publicKey.toBase58().slice(-4);}catch(e){ if(walletBadge) walletBadge.textContent="Connect cancelled."; } }
        if(connectBtnFixed) connectBtnFixed.addEventListener('click',doConnect);

        chips.forEach(c=>c.addEventListener('click',()=>{ if(usdtInput){ usdtInput.value=c.getAttribute('data-q'); recalc(); } }));

        async function fetchFromJupiter(){ const r=await fetch("https://price.jup.ag/v6/price?ids=SOL"); const j=await r.json(); if(!j?.data?.SOL?.price) throw new Error("No price"); return 1/j.data.SOL.price; }
        async function fetchFromCoingecko(){ const r=await fetch("https://api.coingecko.com/api/v3/simple/price?ids=solana&vs_currencies=usd"); const j=await r.json(); if(!j?.solana?.usd) throw new Error("No price"); return 1/j.solana.usd; }
        async function fetchQuote(){ try{ const v=await fetchFromJupiter(); quote.solPerUsdt=v; quote.ts=Date.now(); if(quoteNote) quoteNote.textContent="Quote: 1 USDT ≈ "+v.toFixed(9)+" SOL • updated just now"; if(estimateBlock) estimateBlock.style.display=''; }catch(_){ try{ const v=await fetchFromCoingecko(); quote.solPerUsdt=v; quote.ts=Date.now(); if(quoteNote) quoteNote.textContent="Quote (fallback): 1 USDT ≈ "+v.toFixed(9)+" SOL"; if(estimateBlock) estimateBlock.style.display=''; }catch(e2){ if(quoteNote) quoteNote.textContent="Quote unavailable. Proceed without estimate or retry."; if(estimateBlock) estimateBlock.style.display='none'; } } }
        setInterval(()=>{ const pres=document.getElementById('presale'); if(pres && pres.offsetParent!==null){ fetchQuote(); } },30000);

        async function recalc(){
          const usdt=parseFloat(usdtInput?.value||"0");
          if(!isFinite(usdt)||usdt<=0){ if(solOut) solOut.value=""; if(tspillOut) tspillOut.value=""; return; }
          if(!quote.ts||Date.now()-quote.ts>30_000){ await fetchQuote(); }
          if(quote.solPerUsdt && estimateBlock && estimateBlock.style.display!=='none'){
            const solAmt=usdt*quote.solPerUsdt; if(solOut) solOut.value=solAmt.toFixed(6)+" SOL";
          }
          const tspill=usdt/PRICE_USDT_PER_TSPILL; if(tspillOut) tspillOut.value=Math.floor(tspill).toLocaleString()+" TSPILL";
        }
        if(usdtInput) usdtInput.addEventListener('input',recalc);
        fetchQuote();

        async function sendSol(){
          if(txStatus) txStatus.textContent="";
          const usdt=parseFloat(usdtInput?.value||"0");
          if(!provider){ await doConnect(); if(!provider) return; }
          if(!isFinite(usdt)||usdt<MIN_USDT||usdt>MAX_USDT){ if(txStatus) txStatus.innerHTML="<span class='warn'>Enter between "+MIN_USDT+" and "+MAX_USDT+" USDT (equivalent).</span>"; return; }
          if(!quote.ts||Date.now()-quote.ts>30_000){ await fetchQuote(); }
          if(!quote.solPerUsdt && txStatus){ txStatus.innerHTML="<span class='warn'>Proceeding without estimate.</span>"; }

          const solAmount=(quote.solPerUsdt? usdt*quote.solPerUsdt : 0);
          const lamports=Math.max(1, Math.round(solAmount*solanaWeb3.LAMPORTS_PER_SOL));

          try{
            const fromPubkey=provider.publicKey;
            const tx=new solanaWeb3.Transaction().add(solanaWeb3.SystemProgram.transfer({ fromPubkey, toPubkey: treasury, lamports }));
            tx.feePayer=fromPubkey; const { blockhash, lastValidBlockHeight }=await connection.getLatestBlockhash(); tx.recentBlockhash=blockhash;
            const signed=await provider.signTransaction(tx); const sig=await connection.sendRawTransaction(signed.serialize(),{ skipPreflight:false }); await connection.confirmTransaction({ signature:sig, blockhash, lastValidBlockHeight },'confirmed');

            const tspill=Math.floor(usdt/PRICE_USDT_PER_TSPILL);
            if(txStatus) txStatus.innerHTML="<span class='ok'>Sent.</span> Tx: <span class='mono'>"+sig+"</span><br/>Record — Wallet: <span class='mono'>"+fromPubkey.toBase58()+"</span> • USDT value: "+usdt.toFixed(2)+" • SOL: "+(lamports/solanaWeb3.LAMPORTS_PER_SOL).toFixed(6)+" • TSPILL: "+tspill.toLocaleString()+".";
          }catch(e){ if(txStatus) txStatus.innerHTML="<span class='err'>Transaction failed or cancelled.</span>"; }
        }
        if(sendBtn) sendBtn.addEventListener('click',sendSol);
      })();
    </script>
  </body>
</html>
